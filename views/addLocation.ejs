<!DOCTYPE html>
<html lang="en" dir="ltr">
  <%- include ./partials/head.ejs %>
  <body>
      <%- include ./partials/navBar %>
      <div class="container">
        <div class="row mt-4 pt-5">
              <div class="col-8 mx-auto border border-white shadow-lg p-4 bg-white rounded mt-4">
                 <h3 class="text-center">Add Location</h3>
                 <%- include ./partials/flashMessage.ejs %>
                 <% if( locations.length > 0){%>
                   <ul class="p-2">
                     <%locations.forEach(function(location){%>
                       <div class='pr-2 container border'>
                         <div class="row p-1">
                           <span class="col-3"> <%=location.address%> </span>
                           <span class="col-1"> Lon: </span>
                           <span class="col-2"> <%=location.coordinate.coordinate[0].toString().substring(0,6)%> </span>
                           <span class="col-1"> Lat: </span>
                           <span class="col-2"> <%=location.coordinate.coordinate[1].toString().substring(0,6)%></span>
                           <div class="col-1">
                             <a class="btn btn-success btn-sm" href="/editLocation/<%=location.id%>">Edit</a>
                           </div>
                           <div class='col-1'>
                             <a class="btn btn-danger btn-sm" href="/deleteLocation/<%=location.id%>" onclick="return confirm('Are you sure you want to delete the location?');">
                               Delete
                             </a>
                           </div>
                         </div>
                       </div>
                     <%})%>
                   </ul>
                 <%}%>
                 <form class="p-2" action="/addLocation" method="post">
                   <%- include ./partials/csrfToken.ejs%>
                   <div class="form-group row">
                      <label for="address" class="col-sm-2 col-form-label">Address:</label>
                      <div class="col-sm-10">
                        <input name="address" type="text" class="form-control" id="address" placeholder="Ward, City, Country" required>
                      </div>
                   </div>
                   <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>
                 </form>
              </div>
        </div>
      </div>
  </body>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAW_xLmEjX00dhxc2jqJf0rB_wio2FLjnM&libraries=places"></script>
  <script>
      new google.maps.places.Autocomplete(document.getElementById('address'));
  </script>
</html>
